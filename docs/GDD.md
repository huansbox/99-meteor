# 全壘打乘法王 - 遊戲設計企劃書
## Math Baseball: Home Run Master

**版本**：1.0
**目標平台**：iPad Safari（Web App）
**目標受眾**：小學三年級學生（8-9 歲）
**學習目標**：熟練九九乘法表

---

## 1. 設計哲學

### 核心理念
> **「每一次揮棒都是成功」**

本遊戲採用**純正向增強設計**，完全排除懲罰機制：

| 傳統設計 | 本遊戲設計 |
|---------|-----------|
| 答錯扣分 | 答錯 = 界外球，可無限重試 |
| 時間到失敗 | 無時間限制，慢答仍有獎勵 |
| 三振出局 | 不存在出局概念 |

### 速度激勵原則
雖然沒有時間壓力，但**答題速度直接影響獎勵等級**：
- 快答 → 全壘打（最高獎勵）
- 慢答 → 保送（仍可得分）
- 答錯 → 界外球（重新作答，無懲罰）

---

## 2. 遊戲核心機制 (Core Loop)

### 2.1 單次打擊流程

```
┌─────────────────────────────────────────────────────────┐
│  1. 投手準備動畫（1 秒）                                  │
│         ↓                                                │
│  2. 題目出現 + 計時開始                                   │
│     「7 × 8 = ?」                                        │
│         ↓                                                │
│  3. 玩家點選答案（4 選 1）                                │
│         ↓                                                │
│  ┌─────────────┬─────────────┐                          │
│  │   答對       │   答錯       │                          │
│  │   ↓         │   ↓         │                          │
│  │ 依速度判定   │ 界外球動畫   │                          │
│  │ 打擊結果     │ 重新作答     │                          │
│  └─────────────┴─────────────┘                          │
│         ↓                                                │
│  4. 打擊結果動畫 + 跑壘                                   │
│         ↓                                                │
│  5. 獲得星星獎勵                                         │
│         ↓                                                │
│  6. 下一位打者（或結束本局）                               │
└─────────────────────────────────────────────────────────┘
```

### 2.2 速度獎勵對照表

| 反應時間 | 打擊結果 | 跑壘數 | 星星 | 視覺回饋 |
|:-------:|:-------:|:-----:|:---:|---------|
| < 2 秒 | **全壘打** | 4 壘 | ⭐⭐⭐ | 球飛出場外 + 煙火特效 |
| 2-4 秒 | 三壘安打 | 3 壘 | ⭐⭐⭐ | 球彈牆反彈 |
| 4-6 秒 | 二壘安打 | 2 壘 | ⭐⭐ | 球穿越內野 |
| 6-10 秒 | 一壘安打 | 1 壘 | ⭐ | 滾地球通過 |
| > 10 秒 | 保送 | 1 壘 | ⭐ | 投手四壞球（仍有進壘） |
| 答錯 | 界外球 | 0 | 0 | 球飛出界，可重試 |

**重點**：即使超過 10 秒，只要答對仍可獲得「保送」並推進壘包。

### 2.3 一局結構

- **一局 = 3 人次打擊**（模擬棒球半局概念）
- **每人次 = 1 道乘法題**
- **預計時間**：45-60 秒（含動畫）

```
第一局
├── 打者 1：題目 → 作答 → 結果動畫（約 15 秒）
├── 打者 2：題目 → 作答 → 結果動畫（約 15 秒）
└── 打者 3：題目 → 作答 → 結果動畫（約 15 秒）
        ↓
   本局結算：總得分 + 星星統計
```

---

## 3. 題庫系統

### 3.1 難度分級

| 難度 | 乘法範圍 | 出題比例 | 特徵 |
|:---:|---------|:-------:|-----|
| **Easy** | ×1, ×2, ×5, ×10 | 1/3 | 規律明顯，易記憶 |
| **Normal** | ×3, ×4, ×6, ×7, ×8, ×9 | 2/3 | 需熟練計算 |

### 3.2 題目生成規則

1. **隨機抽取**：從題庫中依比例抽取（1/3 Easy + 2/3 Normal）
2. **錯題權重**：答錯過的題目，出現機率提高 **2-3 倍**
3. **連對解除**：同一題連續答對 3 次後，移出錯題庫
4. **選項生成**：
   - 正確答案 + 3 個干擾選項
   - 干擾選項規則：±1~3、×10 誤算、相近乘法結果

**範例**：`7 × 8 = ?`
- 正確：56
- 干擾：54（-2）、63（7×9）、48（6×8）

### 3.3 錯題強化機制

```
localStorage 結構：
{
  "wrongQuestions": {
    "7x8": { count: 2, lastWrong: "2024-01-15" },
    "6x7": { count: 1, lastWrong: "2024-01-14" }
  }
}
```

---

## 4. UI/UX 互動設計

### 4.1 螢幕佈局（橫向 1024×768）

```
┌────────────────────────────────────────────────────┐
│                                                    │
│              【 棒 球 場 動 畫 區 】                │
│                    (60%)                           │
│                                                    │
│    ┌─────┐                           ┌─────┐      │
│    │ 二壘 │                           │ 得分 │      │
│    └─────┘                           │ ⭐×5 │      │
│  ┌───┐   ┌───┐                       └─────┘      │
│  │三壘│   │一壘│                                   │
│  └───┘   └───┘                                    │
│       ⚾ 打者                                      │
├────────────────────────────────────────────────────┤
│                                                    │
│           7  ×  8  =  ?                            │
│                                                    │
│   ┌──────────┐  ┌──────────┐                      │
│   │    54    │  │    56    │                      │
│   └──────────┘  └──────────┘                      │
│                                                    │
│   ┌──────────┐  ┌──────────┐                      │
│   │    48    │  │    63    │                      │
│   └──────────┘  └──────────┘                      │
│                                       (40%)        │
└────────────────────────────────────────────────────┘
```

### 4.2 按鈕規格（兒童觸控優化）

| 元素 | 最小尺寸 | 間距 | 說明 |
|-----|---------|-----|-----|
| 答案按鈕 | 120×80 px | 20 px | 大面積易點擊 |
| 確認按鈕 | 100×60 px | - | 明確回饋 |
| 觸控熱區 | +10 px padding | - | 防誤觸 |

### 4.3 視覺設計原則

- **配色**：高對比、護眼配色
  - 背景：草地綠 `#4CAF50`
  - 題目區：米白 `#FFF8E1`
  - 正確回饋：金黃 `#FFD700`
  - 錯誤提示：柔橘 `#FF9800`（非紅色，避免負面感）

- **字體**：
  - 題目數字：48px 粗體
  - 答案選項：36px 粗體
  - 使用系統字體確保清晰

- **動畫**：
  - 時長：0.3-0.5 秒過渡
  - 風格：彈性緩動（ease-out）
  - 打擊成功：球員揮棒 + 球飛行軌跡

---

## 5. 獎勵與進度系統

### 5.1 即時獎勵

| 事件 | 獎勵 |
|-----|-----|
| 全壘打 | ⭐⭐⭐ + 煙火動畫 |
| 三壘/二壘安打 | ⭐⭐ + 歡呼音效 |
| 一壘安打/保送 | ⭐ + 鼓勵音效 |
| 答錯重試後答對 | ⭐ + 「再接再厲」提示 |

### 5.2 累積獎勵

#### 星星商店
- 星星可兌換：球棒造型、球員服裝、球場背景
- 價格範例：新球棒 = 50 ⭐

#### 球員卡收集
- 完成特定乘法段解鎖對應球員卡
- 範例：
  - 「×7 大師」：×7 全部題目各答對 3 次
  - 「速算王」：累計 10 次全壘打

### 5.3 進度存檔

```javascript
// localStorage 結構
{
  "player": {
    "name": "小明",
    "totalStars": 245,
    "gamesPlayed": 32
  },
  "progress": {
    "masteredMultipliers": [1, 2, 5, 10],
    "inProgress": [3, 4],
    "locked": [6, 7, 8, 9]
  },
  "collection": {
    "playerCards": ["speed_king", "7_master"],
    "bats": ["wooden", "metal"],
    "jerseys": ["blue"]
  },
  "wrongQuestions": {
    "7x8": { wrongCount: 2, correctStreak: 0 },
    "6x7": { wrongCount: 1, correctStreak: 2 }
  }
}
```

---

## 6. 音效設計

### 6.1 音效清單

| 事件 | 音效 | 時長 |
|-----|-----|-----|
| 投球 | 「咻～」風聲 | 0.5 秒 |
| 揮棒 | 「啪！」擊球聲 | 0.3 秒 |
| 全壘打 | 歡呼 + 煙火聲 | 1.5 秒 |
| 安打 | 短促歡呼 | 0.8 秒 |
| 保送 | 輕快提示音 | 0.5 秒 |
| 界外球 | 「噹～」彈跳聲 | 0.5 秒 |
| 局結束 | 勝利號角 | 1 秒 |

### 6.2 音量控制
- 預設音量：50%
- 提供靜音按鈕（右上角）
- 記憶使用者音量偏好

---

## 7. 技術規格

### 7.1 技術棧

| 層級 | 技術 | 說明 |
|-----|-----|-----|
| 結構 | HTML5 | 語義化標籤 |
| 樣式 | CSS3 | Flexbox/Grid 佈局 |
| 互動 | Vanilla JavaScript | 無框架依賴 |
| 動畫 | Canvas 2D API | 球場與打擊動畫 |
| 音效 | Web Audio API | 低延遲播放 |
| 存儲 | localStorage | 離線進度保存 |

### 7.2 效能目標

- 首次載入：< 3 秒（WiFi 環境）
- 動畫幀率：60 FPS
- 觸控響應：< 100ms

### 7.3 瀏覽器支援

- **主要**：Safari (iPad) 14+
- **次要**：Chrome、Firefox（桌面測試用）

---

## 8. 遊戲流程圖

```
                    ┌─────────────┐
                    │   啟動遊戲   │
                    └──────┬──────┘
                           ↓
                    ┌─────────────┐
                    │  主選單畫面  │
                    │ • 開始遊戲   │
                    │ • 收藏室     │
                    │ • 設定       │
                    └──────┬──────┘
                           ↓
               ┌───────────┴───────────┐
               ↓                       ↓
        ┌─────────────┐         ┌─────────────┐
        │  選擇難度    │         │   收藏室     │
        │ • 自由練習   │         │ • 球員卡     │
        │ • 挑戰模式   │         │ • 裝備商店   │
        └──────┬──────┘         └─────────────┘
               ↓
        ┌─────────────┐
        │   遊戲進行   │ ←──────────────┐
        │  （一局）    │                │
        └──────┬──────┘                │
               ↓                       │
        ┌─────────────┐                │
        │   局結算     │                │
        │ • 顯示得分   │                │
        │ • 獲得獎勵   │                │
        └──────┬──────┘                │
               ↓                       │
        ┌─────────────┐                │
        │  繼續？      │───── 是 ──────┘
        └──────┬──────┘
               │ 否
               ↓
        ┌─────────────┐
        │  返回主選單  │
        └─────────────┘
```

---

## 9. 未來擴充（Phase 2）

以下功能可於基礎版完成後考慮：

1. **多人對戰**：家長 vs 孩子即時對決
2. **每日挑戰**：限定題目，排行榜機制
3. **成就系統**：更多收集要素
4. **自訂題庫**：家長可新增其他數學練習

---

## 附錄 A：設計決策記錄

| 決策項目 | 選擇 | 理由 |
|---------|-----|-----|
| 視覺風格 | 簡約清晰 | 避免花俏干擾，聚焦學習 |
| 音效 | 簡單音效 | 增加回饋感，但不過度刺激 |
| 難度設計 | Easy 1/3 + Normal 2/3 | 建立信心同時保持挑戰 |
| 錯題機制 | 權重提高 + 連對解除 | 針對弱點強化，避免重複疲勞 |
| 時間壓力 | 無（但獎勵速度） | 正向增強，減少焦慮 |

---

**文件結束**
*版本 1.0 | 建立日期：2025-01-12*
