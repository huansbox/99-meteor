# 隕石數學防衛隊 Meteor Math Defense

## 專案概要

- **類型**：9x9 乘法練習遊戲（太空隕石主題）
- **平台**：iPad Safari 觸控優化
- **部署**：GitHub Pages 靜態網站
- **技術**：單檔 HTML + CSS + Vanilla JS（無框架依賴）

---

## 遊戲機制

### 三關卡制

| 關卡 | 題數 | 生成間隔 | 落速 (px/frame) | 分數倍率 |
|------|------|----------|-----------------|----------|
| 1    | 10   | 4000ms   | 0.6 ~ 0.9       | x1.0     |
| 2    | 15   | 3000ms   | 0.9 ~ 1.2       | x1.5     |
| 3    | 20   | 2000ms   | 1.2 ~ 1.5       | x2.0     |

### 得分區域

| 區域 | Y 座標範圍 | 基礎分數 |
|------|-----------|----------|
| 天空 | 0-25%     | 100      |
| 高空 | 25-50%    | 80       |
| 低空 | 50-75%    | 60       |
| 地面 | 75-100%   | 40       |

**最終得分 = 基礎分數 × 關卡倍率**

### 操作介面

- 數字鍵盤：`12345C / 67890` 兩行配置
- C 按鈕：清除全部輸入（跨 2 行大按鈕）
- 點擊隕石：選取目標進行作答

---

## 檔案結構

```
/
├── index.html      # 單檔遊戲（HTML + CSS + JS 內嵌）
├── CLAUDE.md       # 專案文檔（本檔案）
└── README.md       # 部署說明
```

---

## 已完成功能

### P1：題目難度分配 ✓

依關卡調整 Easy/Normal 題目比例

| 關卡 | Easy 比例 | 說明 |
|------|-----------|------|
| 1    | 70%       | 入門暖身 |
| 2    | 40%       | 漸進挑戰 |
| 3    | 20%       | 高難度 |

- **Easy**：×1, ×2, ×5, ×10 組合
- **Normal**：×3, ×4, ×6, ×7, ×8, ×9 互乘

### P2：PR 高分記錄 ✓

- `RecordsManager` 類別管理 localStorage
- 排行榜顯示前 10 名（分數 + 日期）
- 遊戲結束時前 5 名顯示排名徽章
- 主選單顯示最高分

---

## 待實作功能

### P3：錯題追蹤（暫緩）

- 街機式遊戲節奏快，錯題重練價值較低
- 若需實作，建議僅在 session 內重複出現答錯題目

---

## 技術決策

| 項目 | 選擇 | 理由 |
|------|------|------|
| 架構 | 單檔 HTML | 簡化部署、易於維護 |
| 動畫 | Canvas 2D | Safari 支援佳、效能好 |
| 存儲 | localStorage | 離線可用、無後端需求 |
| 遊戲迴圈 | requestAnimationFrame | 流暢 60fps |

---

## Git 分支策略

- `main`：穩定版本，禁止直接修改
- `feat/*`：新功能開發
- `fix/*`：Bug 修復
